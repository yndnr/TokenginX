apiVersion: v1
kind: ConfigMap
metadata:
  name: tokenginx-config
  namespace: tokenginx
  labels:
    app: tokenginx
data:
  log_level: "info"
  config.yaml: |
    server:
      tcp_addr: "0.0.0.0:6380"
      grpc_addr: "0.0.0.0:9090"
      http_addr: "0.0.0.0:8080"
      read_timeout: 30
      write_timeout: 30
      idle_timeout: 120
      max_connections: 10000

    storage:
      shard_count: 256
      initial_capacity: 4096
      enable_persistence: true
      data_dir: "/var/lib/tokenginx"

    cache:
      algorithm: "w-tinylfu"
      max_memory_mb: 1024
      eviction_policy: "lru"
      enable_stats: true

    ttl:
      enabled: true
      default_ttl: 0
      cleanup_interval: 60
      cleanup_batch_size: 1000

    protocols:
      oauth:
        enabled: true
        default_token_ttl: 3600
        default_refresh_token_ttl: 2592000
        default_code_ttl: 300
        key_prefix: "oauth"

    monitoring:
      prometheus:
        enabled: true
        addr: "0.0.0.0:9100"
        path: "/metrics"
      health_check:
        enabled: true
        addr: "0.0.0.0:8081"
        path: "/health"

    logging:
      level: "info"
      format: "json"
      output: "stdout"
